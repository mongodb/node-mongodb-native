<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="/node-mongodb-native/3.5/img/favicon.png">

    <title>Frequently Asked Questions</title>

    <link rel="stylesheet" href="/node-mongodb-native/3.5/lib/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/3.5/lib/font-awesome/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/3.5/css/mongodb-docs.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/3.5/css/overrides.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/3.5/lib/highlight/styles/idea.css" />
<link rel="stylesheet" href="/node-mongodb-native/3.5/lib/bootstrap-toggle/bootstrap-toggle.min.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/3.5/css/java.css" type="text/css" />


  </head>

  <body>
  
  <section id="container" class="">
      
      <header id="header-db" class="row" role="navigation">
  <div class="header-content">
    <div class="toggle-nav pull-left">
        <i class="fa fa-bars"></i>
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
    </div>
    
    <div class="logo pull-left">
      <a href="https://www.mongodb.com/">
        <img src="https://mongodb.github.io/node-mongodb-native/img/logo-mongodb-header.png", alt="MongoDB.com" />
      </a>
    </div>
    
    <div>
<div class="nav-items pull-right">
  <a href="https://university.mongodb.com" data-toggle="tooltip" data-placement="bottom" title="Free Online Classes">MongoDB University</a>
  <a href="https://www.mongodb.com/try" data-toggle="tooltip" data-placement="bottom" title="Download MongoDB">Downloads</a>
  <a href="https://www.mongodb.com/community" data-toggle="tooltip" data-placement="bottom" title="Get involved with MongoDB">Community</a>
  <a href="https://www.mongodb.com/docs" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Documentation">Docs</a>
  <a href="https://www.mongodb.com/blog" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Blog">Blog</a>
  <div id="search">
<form method="get" action="//www.google.com/search" target="_blank">
    <input type="text" name="searchQuery" size="20" value="" autocomplete="off" placeholder="Search docs">
    <input type="hidden" name="site" value="/node-mongodb-native/3.5">
    <input type="hidden" name="q" value="">
    <label for="searchQuery"><i class="fa fa-search fa-1"></i></label>
</form>
</div>

</div>
</div>

  </div>
</header>


      

      
<aside id="sidebar" class="sidebar">
    <div class="ssidebar nav-collapse">
      <div class="ssidebarwrapper">
        <h3>
          <a class="index-link" href="/node-mongodb-native/3.5/../">MongoDB Node.js Driver</a>
          <a class="version pull-right" href="/node-mongodb-native/3.5">3.5</a>
        </h3>

        
        <ul class="sidebar-menu">
          
          
          
          
          
          
          
          
          
          
          
          

          
          
            
            









  


          
            
            









  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
    
      
    
  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
  
  
  
  
  
  
  

  
    
    
    
      
    
  
  


        
      
    
    
  


          
            
            









  
    
    
      
      
    
    
  


          
            
            









  


          
            
            









  


          
            
            









  


          
            
            









  


          

          

          
            
            
















    <li class="toctree-l1">
    <a href="/node-mongodb-native/3.5/installation-guide/installation-guide/">
        <i class='fa fa-puzzle-piece'></i>
        Installation Guide
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/node-mongodb-native/3.5/quick-start/quick-start/">
        <i class='fa fa-road'></i>
        Quick Start
    </a>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/node-mongodb-native/3.5/tutorials/main/" class="">
      <i class='fa fa-thumb-tack'></i>
      <span>Tutorials</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/node-mongodb-native/3.5/tutorials/connect/" class="">
      <i class='fa'></i>
      <span>Connect to MongoDB</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/tutorials/connect/authenticating/">
        <i class='fa'></i>
        Authentication
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/tutorials/connect/tls/">
        <i class='fa'></i>
        TLS Settings
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/tutorials/collations/">
        <i class='fa'></i>
        Collations
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/tutorials/collections/">
        <i class='fa'></i>
        Collections
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/tutorials/create-indexes/">
        <i class='fa'></i>
        Create Indexes
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/tutorials/crud/">
        <i class='fa'></i>
        CRUD Operations
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/tutorials/projections/">
        <i class='fa'></i>
        Projections
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/tutorials/aggregation/">
        <i class='fa'></i>
        Aggregation
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/tutorials/text-search/">
        <i class='fa'></i>
        Text Search
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/tutorials/geospatial-search/">
        <i class='fa'></i>
        Geospatial Search
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/tutorials/commands/">
        <i class='fa'></i>
        Database Commands
    </a>
  </li>


        
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/node-mongodb-native/3.5/tutorials/gridfs/" class="">
      <i class='fa'></i>
      <span>GridFS</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/tutorials/gridfs/streaming/">
        <i class='fa'></i>
        GridFS API
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/tutorials/gridfs/gridstore/">
        <i class='fa'></i>
        Legacy GridStore
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


          
            
            













  




<li class="toctree-l1  current">
  <a href="/node-mongodb-native/3.5/reference/main/" class="">
      <i class='fa fa-book'></i>
      <span>Reference</span>
      <span class="menu-arrow fa fa-angle-down"></span>
  </a>
    <ul  class="current">
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/node-mongodb-native/3.5/reference/connecting/" class="">
      <i class='fa'></i>
      <span>Connection Options</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/reference/connecting/connection-settings/">
        <i class='fa'></i>
        Connection Settings
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/node-mongodb-native/3.5/reference/ecmascriptnext/" class="">
      <i class='fa'></i>
      <span>ECMAScript Next</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/reference/ecmascriptnext/connecting/">
        <i class='fa'></i>
        Connecting
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/reference/ecmascriptnext/crud/">
        <i class='fa'></i>
        CRUD Operations
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/node-mongodb-native/3.5/reference/management/" class="">
      <i class='fa'></i>
      <span>Management</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/reference/management/logging/">
        <i class='fa'></i>
        Logging
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/reference/management/apm/">
        <i class='fa'></i>
        APM
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/reference/management/cmap-monitoring/">
        <i class='fa'></i>
        Connection Pool Monitoring
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/3.5/reference/management/sdam-monitoring/">
        <i class='fa'></i>
        Topology Monitoring
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/reference/client-side-encryption/">
        <i class='fa'></i>
        Client Side Encryption
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/reference/cursors/">
        <i class='fa'></i>
        Cursors
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/reference/pool/">
        <i class='fa'></i>
        Pool Design
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/reference/unified-topology/">
        <i class='fa'></i>
        Unified Topology Design
    </a>
  </li>


        
        
        
        
        













  




    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/reference/faq/">
        <i class='fa'></i>
        Frequently Asked Questions
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/node-mongodb-native/3.5/upgrade-migration/main/" class="">
      <i class='fa fa-cog'></i>
      <span>Upgrade Guide</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/node-mongodb-native/3.5/upgrade-migration/upgrading/">
        <i class='fa fa-wrench'></i>
        Upgrading to 2.x
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/node-mongodb-native/3.5/api">
        <i class='fa fa-file-text-o'></i>
        API Documentation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://github.com/mongodb/node-mongodb-native">
        <i class='fa fa-github'></i>
        Source Code
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/node-mongodb-native/3.5/issues-help/">
        <i class='fa fa-life-ring'></i>
        Issues &amp; Help
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://gitter.im/mongodb/node-mongodb-native?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge">
        <img src='https://badges.gitter.im/Join Chat.svg'/>
        
    </a>
  </li>


          
        </ul>
        
    </div>
  </div>
  
</aside>

<div class="option-popup closed hidden" id="optionsVersionsPopup">
<div class="option-header">
  <i class="fa fa-gear"></i>
  <span>OPTIONS</span>
  <i class="fa fa-angle-up pull-right"></i>
</div>
<div class="option-body">
  <ul>
      
      <li>
        <label>Version</label>
        <div class="btn-group btn-group-xs pull-right">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            Select Version <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" id="optionsVersionsMenu">
          </ul>
        </div>
      </li>

   


    

  </ul>
</div>
</div>



      
      <section id="main-content" class="content">
          <section class="main-column pull-left">
            <div class="document">
              <div class="documentwrapper">
                <div class="bodywrapper">
                  <div class="body">

                    <div class="alert alert-info" role="alert">
  Note: You are currently viewing version 3.5 of the Node.js driver documentation.
  <a href="https://www.mongodb.com/docs/drivers/node">Click here</a> for the latest version.
</div>



   
<a class="edit-link" href="https://github.com/mongodb/node-mongodb-native/blob/master/docs/reference/content/reference/faq/index.md" target="_blank" title="Edit reference/faq/index.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>










<div class="bc">
<ul>
  
  
  
  
  
  <li><a href="/node-mongodb-native/3.5/reference/main/">Reference</a> <i class="fa fa-angle-right"></i></li>
  <li>Frequently Asked Questions</li>
</ul>
</div>




<h1 id="what-is-the-difference-between-connecttimeoutms-sockettimeoutms-and-maxtimems">What is the difference between connectTimeoutMS, socketTimeoutMS and maxTimeMS ?</h1>

<table>
<thead>
<tr>
<th align="left">Setting</th>
<th align="left">Default Value client.connect</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">connectTimeoutMS</td>
<td align="left">30000</td>
<td align="left">The connectTimeoutMS sets the number of milliseconds a socket stays inactive before closing during the connection phase of the driver. That is to say, when the application initiates a connection, when a replica set connects to new members, or when a replica set reconnects to members. A value of 10000 milliseconds would mean the driver would wait up to 10 seconds for a response from a MongoDB server.</td>
</tr>

<tr>
<td align="left">socketTimeoutMS</td>
<td align="left">360000</td>
<td align="left">The socketTimeoutMS sets the number of milliseconds a socket stays inactive after the driver has successfully connected before closing. If the value is set to 360000 milliseconds, the socket closes if there is no activity during a 6 minutes window.</td>
</tr>

<tr>
<td align="left">maxTimeMS</td>
<td align="left">N/A</td>
<td align="left">The maxTimeMS setting specifies how long MongoDB should run an operation before cancelling it. If the maxTimeMS is set to 10000 milliseconds, any operation that runs over that limit returns a timeout error.</td>
</tr>
</tbody>
</table>

<h4 id="fail-fast-during-connection">Fail fast during connection</h4>

<p>In this scenario, the developer wants to ensure that the driver does not
hang during the connection phase or spend an unnecessarily long time
attempting to connect to replica set members who are not reachable.</p>

<p>As a general rule you should ensure that the <code>connectTimeoutMS</code> setting
is not lower than the longest network latency you have to a member of
the set. If one of the <code>secondary</code> members is on the other side of the
planet and has a latency of 10000 milliseconds, setting the
<code>connectTimeoutMS</code> to anything lower will prevent the driver from ever
connecting to that member.</p>

<h3 id="sockettimeoutms-as-a-way-to-abort-operations">socketTimeoutMS as a way to abort operations</h3>

<p>Developers sometimes try to use <code>socketTimeoutMS</code>
to end operations which may run for too long and slow
down the application, but doing so may not achieve the intended result.</p>

<p>Closing the socket forces a reconnect of the driver&rsquo;s connection pool
and introduces latency to any other operations which are queued up.
Chronically slow operations will therefore cause a large number of
reconnect requests, negatively impacting throughput and performance.</p>

<p>Also, closing the socket does not terminate the operation; it will continue
to run on the MongoDB server, which could cause data inconsistencies
if the application retries the operation on failure.</p>

<p>That said, there are some important use cases for <code>socketTimeoutMS</code>. It&rsquo;s
possible that a MongoDB process may error out, or that a misconfigured
firewall may close a socket connection without sending a <code>FIN</code> packet.
In these cases there is no way for the driver to detect that the
connection has died, and <code>socketTimeoutMS</code> is essential to ensure that the
sockets are closed correctly.</p>

<p>A good rule of thumb is to set <code>socketTimeoutMS</code> to two to three times the
length of the slowest operation which runs through the driver.</p>

<h3 id="sockettimeoutms-and-large-connection-pools">socketTimeoutMS and large connection pools</h3>

<p>Having a large connection pool does not always reduce reconnection
requests. Consider the following example: an application has
a connection pool size of 5 sockets and has <code>socketTimeoutMS</code> set
to 5000 milliseconds. Operations occur, on average, every 3000
milliseconds, and reconnection requests are frequent.
Each socket times out after 5000 milliseconds, which means that all
sockets must do something during that 5000 millisecond period to
avoid closing. One message every 3000 milliseconds is not enough to
keep the sockets active, so several of the sockets will time out
after 5000 milliseconds.</p>

<p>Reducing the pool size to 1 will fix the problem.</p>

<h3 id="the-special-meaning-of-0">The special meaning of 0</h3>

<p>Setting <code>connectTimeoutMS</code> and <code>socketTimeoutMS</code> to the value 0 has
a special meaning. It causes the application to use the operating
system&rsquo;s default socket timeout value.</p>

<h3 id="maxtimems-is-the-option-you-are-looking-for">maxTimeMS is the option you are looking for</h3>

<p>Many developers set a low <code>socketTimeoutMS</code> value, intending
to prevent long-running server operations from slowing down
the application. <code>maxTimeMS</code> is usually a better choice; it allows
MongoDB itself to cancel operations which run for more than <code>maxTimeMS</code>
milliseconds.</p>

<p>The following example demonstrates how to use <code>MaxTimeMS</code> with a <code>find</code>
operation.</p>

<pre><code class="language-js">// Execute a find command
col.find({&quot;$where&quot;: &quot;sleep(100) || true&quot;})
  .maxTimeMS(50)
  .count(function(err, count) {
});
</code></pre>

<h3 id="what-does-the-keepalive-setting-do">What does the keepAlive setting do?</h3>

<p><code>keepAlive</code> is a socket setting available from Node.js that in theory
will keep a socket alive by sending periodic probes to MongoDB.
However, this only works if the operating system supports
<code>SO_KEEPALIVE</code>, and still might not work if a firewalls
ignores or drops the <code>keepAlive</code> packets.</p>

<h3 id="on-misconfigured-firewalls">On misconfigured firewalls</h3>

<p>Internal firewalls which exist between application servers and MongoDB
are often misconfigured, and are overly aggressive in their culling of
socket connections. If you experience unexpected network behavior, here
are some things to check:</p>

<ol>
<li>The firewall should send a FIN packet when closing a socket,
allowing the driver to detect that the socket is closed.</li>
<li>The firewall should allow keepAlive probes.</li>
</ol>

<h1 id="i-m-getting-econnreset-when-calling-client-connect">I&rsquo;m getting ECONNRESET when calling client.connect</h1>

<p>This can occur if the connection pool is too large.</p>

<pre><code class="language-js">const client = new MongoClient('mongodb://localhost:27017/test?maxPoolSize=5000');
client.connect(function(err) {
	// connection
});
</code></pre>

<p>If this operation causes an <code>ECONNRESET</code> error, you may have run into
the file descriptor limit for your Node.js process.</p>

<p>In most operating systems, each socket connection is associated with a
file descriptor. Many operating systems have a limit on how many such
file descriptors can be used by a single process.</p>

<p>The way to fix the descriptor limit issue is to increase the number of
file descriptors for the Node.js process. On Mac OS and Linux you do
this with the <code>ulimit</code> shell command.</p>

<pre><code>ulimit -n 6000
</code></pre>

<p>This sets the maximum number of file descriptors for the process to
6000, allowing Node.js to connect with a pool size of 5000 sockets.</p>

<h1 id="how-can-i-prevent-a-slow-operation-from-delaying-other-operations">How can I prevent a slow operation from delaying other operations?</h1>

<div class="admonition note">
<h5 class="admonition-title">Note</h5>
<p>The driver is only affected by the slow train operations if the number of slow operations is larger than the max pool size.</p>

</div>


<p>While Node.js is asynchronous, MongoDB is not. Currently, MongoDB uses a single execution thread per socket. This means that it will only execute a single operation on a socket at any given point in time. Any other operations sent to that socket will have to wait until the current operation is finished. If you have a slow-running operation which holds up other operations,
the best solution is to create a separate connection pool for the slow operation, isolating it from other, faster
operations.</p>

<h1 id="ensure-your-connection-string-is-valid-for-replica-set">Ensure your connection string is valid for Replica Set</h1>

<p>The connection string passed to the driver <strong>MUST</strong> use the fully qualified host names for the servers as set in the replicaset config. Given the following configuration settings for your replicaset.</p>

<pre><code class="language-js">{
	&quot;_id&quot; : &quot;testSet&quot;,
	&quot;version&quot; : 1,
	&quot;protocolVersion&quot; : 1,
	&quot;members&quot; : [
		{
			&quot;_id&quot; : 1,
			&quot;host&quot; : &quot;server1:31000&quot;,
		},
		{
			&quot;_id&quot; : 2,
			&quot;host&quot; : &quot;server2:31001&quot;,
		},
		{
			&quot;_id&quot; : 3,
			&quot;host&quot; : &quot;server3:31002&quot;,
		}
	]
}
</code></pre>

<p>You must ensure <code>server1</code>, <code>server2</code> and <code>server3</code> are resolvable from the driver for the Replicaset discovery and failover to work correctly.</p>






<div id="btnv">
  
  <div class="pull-left">
  <a class="navigation prev" href="/node-mongodb-native/3.5/reference/unified-topology/">
      <i class="fa fa-long-arrow-left"> </i> Unified Topology Design
  </a>
  </div>
  
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li><a href="#what-is-the-difference-between-connecttimeoutms-sockettimeoutms-and-maxtimems">What is the difference between connectTimeoutMS, socketTimeoutMS and maxTimeMS ?</a>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#fail-fast-during-connection">Fail fast during connection</a></li>
</ul></li>
<li><a href="#sockettimeoutms-as-a-way-to-abort-operations">socketTimeoutMS as a way to abort operations</a></li>
<li><a href="#sockettimeoutms-and-large-connection-pools">socketTimeoutMS and large connection pools</a></li>
<li><a href="#the-special-meaning-of-0">The special meaning of 0</a></li>
<li><a href="#maxtimems-is-the-option-you-are-looking-for">maxTimeMS is the option you are looking for</a></li>
<li><a href="#what-does-the-keepalive-setting-do">What does the keepAlive setting do?</a></li>
<li><a href="#on-misconfigured-firewalls">On misconfigured firewalls</a></li>
</ul></li>
</ul></li>
<li><a href="#i-m-getting-econnreset-when-calling-client-connect">I&rsquo;m getting ECONNRESET when calling client.connect</a></li>
<li><a href="#how-can-i-prevent-a-slow-operation-from-delaying-other-operations">How can I prevent a slow operation from delaying other operations?</a></li>
<li><a href="#ensure-your-connection-string-is-valid-for-replica-set">Ensure your connection string is valid for Replica Set</a></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    "/node-mongodb-native/3.5",
   VERSION:     "3.5",
   COLLAPSE_INDEX: false,
   FILE_SUFFIX: '.html',
   HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="/node-mongodb-native/3.5/js/jquery.js"></script>
<script type="text/javascript" src="/node-mongodb-native/3.5/lib/bootstrap.js"></script>
<script type="text/javascript" src="/node-mongodb-native/3.5/js/navbar.js"></script>
<script type="text/javascript" src="/node-mongodb-native/3.5/lib/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="/node-mongodb-native/3.5/js/scripts.js"></script>
<script type="text/javascript" src="/node-mongodb-native/3.5/lib/bootstrap-toggle/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="/node-mongodb-native/3.5/js/java.js"></script>
<script type="text/javascript" src="/node-mongodb-native/3.5/js/toggle-switch.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-29229787-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>

