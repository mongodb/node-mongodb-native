<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="/node-mongodb-native/core//img/favicon.png">

    <title>Quick Tour</title>

    <link rel="stylesheet" href="/node-mongodb-native/core//lib/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/core//lib/font-awesome/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/core//css/mongodb-docs.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/core//css/overrides.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/core//lib/highlight/styles/" />
<link rel="stylesheet" href="/node-mongodb-native/core//lib/bootstrap-toggle/bootstrap-toggle.min.css" type="text/css" />
<link rel="stylesheet" href="/node-mongodb-native/core//css/java.css" type="text/css" />


  </head>

  <body>
  
  <section id="container" class="">
      
      <header id="header-db" class="row" role="navigation">
  <div class="header-content">
    <div class="toggle-nav pull-left">
        <i class="fa fa-bars"></i>
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
    </div>
    
    <div class="logo pull-left">
      <a href="/node-mongodb-native/core//../">
        <img src="/node-mongodb-native/core//img/logo-mongodb-header.png", alt="MongoDB.org" />
      </a>
    </div>
    
    <div>
<div class="nav-items pull-right">
  <a href="https://university.mongodb.com" data-toggle="tooltip" data-placement="bottom" title="Free Online Classes">MongoDB University</a>
  <a href="http://www.mongodb.org/downloads" data-toggle="tooltip" data-placement="bottom" title="Download MongoDB">Downloads</a>
  <a href="http://www.mongodb.org/get-involved" data-toggle="tooltip" data-placement="bottom" title="Get involved with MongoDB">Community</a>
  <a href="http://docs.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Documentation">Docs</a>
  <a href="http://blog.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Blog">Blog</a>
  <div id="search">
<form method="get" action="//www.google.com/search" target="_blank">
    <input type="text" name="searchQuery" size="20" value="" autocomplete="off" placeholder="Search docs">
    <input type="hidden" name="site" value="/node-mongodb-native/core/">
    <input type="hidden" name="q" value="">
    <label for="searchQuery"><i class="fa fa-search fa-1"></i></label>
</form>
</div>

</div>
</div>

  </div>
</header>

      

      
<aside id="sidebar" class="sidebar">
    <div class="ssidebar nav-collapse">
      <div class="ssidebarwrapper">
        <h3>
          <a class="index-link" href="/node-mongodb-native/core//../">MongoDB Node.js Core Driver</a>
          
        </h3>

        
        <ul class="sidebar-menu">
          
          
          
          
          
          
          
          
          
          
          
          

          
          
            
            









  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
  
  
  
  
  
  
  

  
    
    
    
      
      
      
    
    
  
  


        
      
    
    
  


        
      
    
      
      
        
      
    
    
  


          
            
            









  


          
            
            









  


          
            
            









  


          

          

          
            
            
















    <li class="toctree-l1">
    <a href="/node-mongodb-native/core/whats-new/">
        <i class='fa fa-cog'></i>
        What&#39;s New
    </a>
  </li>


          
            
            













  




<li class="toctree-l1  current">
  <a href="/node-mongodb-native/core/driver/" class="">
      <i class='fa fa-arrows-h'></i>
      <span>MongoDB Core</span>
      <span class="menu-arrow fa fa-angle-down"></span>
  </a>
    <ul  class="current">
        
        
        
        













  




<li class="toctree-l2  current">
  <a href="/node-mongodb-native/core/driver/getting-started/" class="">
      <i class='fa fa-road'></i>
      <span>Getting Started</span>
      
  </a>
    <ul  class="current">
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/core/driver/getting-started/installation-guide/">
        <i class='fa'></i>
        Installation Guide
    </a>
  </li>


        
        
        
        
        













  




    <li class="toctree-l3">
    <a href="/node-mongodb-native/core/driver/getting-started/quick-tour/">
        <i class='fa'></i>
        Quick Tour
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/node-mongodb-native/core/driver/reference/" class="">
      <i class='fa fa-book'></i>
      <span>Reference</span>
      
  </a>
    <ul >
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/node-mongodb-native/core/driver/reference/connecting/" class="">
      <i class='fa'></i>
      <span>Connecting</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/node-mongodb-native/core/driver/reference/connecting/connection-settings/">
        <i class='fa'></i>
        Connection Settings
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/core/driver/reference/crud/">
        <i class='fa'></i>
        CRUD Operations
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/node-mongodb-native/core/driver/reference/extending/">
        <i class='fa'></i>
        Extending Cursors
    </a>
  </li>


        
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/node-mongodb-native/core/driver/reference/management/" class="">
      <i class='fa'></i>
      <span>Management</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/node-mongodb-native/core/driver/reference/management/logging/">
        <i class='fa'></i>
        Logging
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/node-mongodb-native/core/api/">
        <i class='fa fa-file-text-o'></i>
        API Documentation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://github.com/christkv/mongodb-core">
        <i class='fa fa-github'></i>
        Source Code
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/node-mongodb-native/core/issues-help/">
        <i class='fa fa-life-ring'></i>
        Issues &amp; Help
    </a>
  </li>


          

          <li  class="toctree-l1">
            <a href='https://gitter.im/mongodb/node-mongodb-native?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge'><img src='https://badges.gitter.im/Join Chat.svg'/></a>
          </li>

        </ul>
        
    </div>
  </div>
  
</aside>

<div class="option-popup closed hidden" id="optionsVersionsPopup">
<div class="option-header">
  <i class="fa fa-gear"></i>
  <span>OPTIONS</span>
  <i class="fa fa-angle-up pull-right"></i>
</div>
<div class="option-body">
  <ul>
      
      <li>
        <label>Version</label>
        <div class="btn-group btn-group-xs pull-right">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            Select Version <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" id="optionsVersionsMenu">
          </ul>
        </div>
      </li>

   


    

  </ul>
</div>
</div>



      
      <section id="main-content" class="content">
          <section class="main-column pull-left">
            <div class="document">
              <div class="documentwrapper">
                <div class="bodywrapper">
                  <div class="body">


   
<a class="edit-link" href="https://github.com/mongodb//blob//docs/reference/content/driver/getting-started/quick-tour.md" target="_blank" title="Edit driver/getting-started/quick-tour.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>










<div class="bc">
<ul>
  
  
  
  
  <li><a href="/node-mongodb-native/core/driver/">MongoDB Core</a> <i class="fa fa-angle-right"></i></li>
  <li><a href="/node-mongodb-native/core/driver/getting-started/">Getting Started</a> <i class="fa fa-angle-right"></i></li>
  <li>Quick Tour</li>
</ul>
</div>




<h1 id="quickstart">QuickStart</h1>

<p>The quick start guide will show you how to set up a simple application using Core driver and MongoDB. It scope is only how to set up the driver and perform the simple crud operations. For more inn depth coverage we encourage reading the tutorials.</p>

<h2 id="create-the-package-json-file">Create the package.json file</h2>

<p>Let&rsquo;s create a directory where our application will live. In our case we will put this under our projects directory.</p>

<pre><code>mkdir myproject
cd myproject
</code></pre>

<p>Create a <strong>package.json</strong> using <strong>NPM</strong>.</p>

<pre><code class="language-bash">npm init
</code></pre>

<p>Add the <code>mongodb-core</code> dependency.</p>

<pre><code class="language-bash">npm install mongodb-core --save
</code></pre>

<p>Save the file and return to the shell or command prompt and use <strong>NPM</strong> to install all the dependencies.</p>

<pre><code>npm install
</code></pre>

<p>You should see <strong>NPM</strong> download a lot of files. Once it&rsquo;s done you&rsquo;ll find all the downloaded packages under the <strong>node_modules</strong> directory.</p>

<h2 id="booting-up-a-mongodb-server">Booting up a MongoDB Server</h2>

<p>Let&rsquo;s boot up a MongoDB server instance. Download the right MongoDB version from <a href="http://www.mongodb.org">MongoDB</a>, open a new shell or command line and ensure the <strong>mongod</strong> command is in the shell or command line path. Now let&rsquo;s create a database directory (in our case under <strong>/data</strong>).</p>

<pre><code>mongod --dbpath=/data --port 27017
</code></pre>

<p>You should see the <strong>mongod</strong> process start up and print some status information.</p>

<h2 id="connecting-to-mongodb">Connecting to MongoDB</h2>

<p>Let&rsquo;s create a new <strong>app.js</strong> file that we will use to show the basic CRUD operations using the MongoDB driver.</p>

<p>First let&rsquo;s add code to connect to the server. Notice that there is no concept of a database here and we use the topology directly to perform the connection.</p>

<pre><code class="language-js">var Server = require('mongodb-core').Server
  , assert = require('assert');

// Set up server connection
var server = new Server({
    host: 'localhost'
  , port: 27017
  , reconnect: true
  , reconnectInterval: 50
});

// Add event listeners
server.on('connect', function(_server) {
  console.log('connected');
  test.done();
});

server.on('close', function() {
  console.log('closed');
});

server.on('reconnect', function() {
  console.log('reconnect');
});

// Start connection
server.connect();
</code></pre>

<p>To connect to a replicaset we would use the <code>ReplSet</code> class and for a set of Mongos proxies we use the <code>Mongos</code> class. Each topology class offer the same CRUD operations and you operate on the topology directly. Let&rsquo;s look at an example exercising all the different available CRUD operations.</p>

<pre><code class="language-js">var Server = require('mongodb-core').Server
  , assert = require('assert');

// Set up server connection
var server = new Server({
    host: 'localhost'
  , port: 27017
  , reconnect: true
  , reconnectInterval: 50
});

// Add event listeners
server.on('connect', function(_server) {
  console.log('connected');

  // Execute the ismaster command
  _server.command('system.$cmd', {ismaster: true}, function(err, result) {

    // Perform a document insert
    _server.insert('myproject.inserts1', [{a:1}, {a:2}], {
      writeConcern: {w:1}, ordered:true
    }, function(err, results) {
      assert.equal(null, err);
      assert.equal(2, results.result.n);      

      // Perform a document update
      _server.update('myproject.inserts1', [{
        q: {a: 1}, u: {'$set': {b:1}}
      }], {
        writeConcern: {w:1}, ordered:true
      }, function(err, results) {
        assert.equal(null, err);
        assert.equal(1, results.result.n);

        // Remove a document
        _server.remove('myproject.inserts1', [{
          q: {a: 1}, limit: 1
        }], {
          writeConcern: {w:1}, ordered:true
        }, function(err, results) {
          assert.equal(null, err);
          assert.equal(1, results.result.n);

          // Get a document
          var cursor = _server.cursor('integration_tests.inserts_example4', {
              find: 'integration_tests.example4'
            , query: {a:1}
          });

          // Get the first document
          cursor.next(function(err, doc) {
            assert.equal(null, err);
            assert.equal(2, doc.a);

            // Execute the ismaster command
            _server.command(&quot;system.$cmd&quot;
              , {ismaster: true}, function(err, result) {
                assert.equal(null, err)
                _server.destroy();              
            });
          });
      });
    });

    test.done();
  });
});

server.on('close', function() {
  console.log('closed');
});

server.on('reconnect', function() {
  console.log('reconnect');
});

// Start connection
server.connect();
</code></pre>

<p>The core driver does not contain any helpers or abstractions only the core crud operations. These consist of the following commands.</p>

<ul>
<li><code>insert</code>, Insert takes an array of 1 or more documents to be inserted against the topology and allows you to specify a write concern and if you wish to execute the inserts in order or out of order.</li>
<li><code>update</code>, Update takes an array of 1 or more update commands to be executed against the server topology and also allows you to specify a write concern and if you wish to execute the updates in order or out of order.</li>
<li><code>remove</code>, Remove takes an array of 1 or more remove commands to be executed against the server topology and also allows you to specify a write concern and if you wish to execute the removes in order or out of order.</li>
<li><code>cursor</code>, Returns you a cursor for either the &lsquo;virtual&rsquo; <code>find</code> command, a command that returns a cursor id or a plain cursor id. Read the cursor tutorial for more inn depth coverage.</li>
<li><code>command</code>, Executes a command against MongoDB and returns the result.</li>
<li><code>auth</code>, Authenticates the current topology using a supported authentication scheme.</li>
</ul>

<p>The Core Driver is a building block for library builders and is not meant for usage by end users as it lacks a lot of features the end user might need such as automatic buffering of operations when a primary is changing in a replicaset or the db and collections abstraction.</p>

<h2 id="next-steps">Next steps</h2>

<p>The next step is to get more in depth information about how the different aspects of the core driver works and how to leverage them to extend the functionality of the cursors. Please view the tutorials for more detailed information.</p>






<div id="btnv">
  
  <div class="pull-left">
  <a class="navigation prev" href="/node-mongodb-native/core/driver/getting-started/installation-guide/">
      <i class="fa fa-long-arrow-left"> </i> Installation Guide
  </a>
  </div>
  
  
  <div class="pull-right">
  <a class="navigation next" href="/node-mongodb-native/core/driver/reference/">
    Reference <i class="fa fa-long-arrow-right"> </i>
  </a>
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li><a href="#quickstart">QuickStart</a>
<ul>
<li><a href="#create-the-package-json-file">Create the package.json file</a></li>
<li><a href="#booting-up-a-mongodb-server">Booting up a MongoDB Server</a></li>
<li><a href="#connecting-to-mongodb">Connecting to MongoDB</a></li>
<li><a href="#next-steps">Next steps</a></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    "/node-mongodb-native/core/",
   VERSION:     "",
   COLLAPSE_INDEX: false,
   FILE_SUFFIX: '.html',
   HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="/node-mongodb-native/core//js/jquery.js"></script>
<script type="text/javascript" src="/node-mongodb-native/core//lib/bootstrap.js"></script>
<script type="text/javascript" src="/node-mongodb-native/core//js/navbar.js"></script>
<script type="text/javascript" src="/node-mongodb-native/core//lib/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="/node-mongodb-native/core//js/scripts.js"></script>
<script type="text/javascript" src="/node-mongodb-native/core//lib/bootstrap-toggle/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="/node-mongodb-native/core//js/java.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-29229787-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>

